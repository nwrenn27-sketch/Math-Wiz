<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Math Wiz - Simple Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            max-width: 800px;
            margin: 40px auto;
            padding: 20px;
            background: #fafafa;
        }
        .test-result {
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            font-weight: 500;
        }
        .pass {
            background: #d1fae5;
            color: #065f46;
            border: 1px solid #10b981;
        }
        .fail {
            background: #fee2e2;
            color: #991b1b;
            border: 1px solid #ef4444;
        }
        .test-header {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 20px;
        }
        button {
            padding: 12px 24px;
            background: #3b82f6;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #2563eb;
        }
    </style>
</head>
<body>
    <div class="test-header">Math Wiz - Automated Tests</div>
    <div id="results"></div>
    <button onclick="runTests()">Run Tests</button>
    <button onclick="window.location.href='index.html'">Open Full App</button>

    <script src="config.js"></script>
    <script src="ai-integration.js"></script>
    <script>
        function test(name, condition) {
            const div = document.createElement('div');
            div.className = `test-result ${condition ? 'pass' : 'fail'}`;
            div.textContent = `${condition ? 'âœ“' : 'âœ—'} ${name}`;
            document.getElementById('results').appendChild(div);
            return condition;
        }

        function runTests() {
            document.getElementById('results').innerHTML = '';
            let passed = 0;
            let total = 0;

            // Test 1: Config exists
            total++;
            if (test('CONFIG object exists', typeof CONFIG !== 'undefined')) passed++;

            // Test 2: MathWizAI class exists
            total++;
            if (test('MathWizAI class exists', typeof MathWizAI !== 'undefined')) passed++;

            // Test 3: AI initialization
            total++;
            let ai = null;
            try {
                ai = new MathWizAI(CONFIG);
                if (test('MathWizAI initializes correctly', ai !== null)) passed++;
            } catch (e) {
                test('MathWizAI initializes correctly', false);
            }

            // Test 4: Provider selection
            total++;
            if (test('AI provider is null when disabled', ai && ai.provider === null)) passed++;

            // Test 5: Problem detection - two cars
            total++;
            const text1 = 'two cars south west';
            const lower1 = text1.toLowerCase();
            const hasTwoCars = lower1.includes('two cars') || (lower1.includes('south') && lower1.includes('west'));
            if (test('Two cars problem detected', hasTwoCars)) passed++;

            // Test 6: Problem detection - plane
            total++;
            const text2 = 'plane radar';
            const hasPlane = text2.toLowerCase().includes('plane') || text2.toLowerCase().includes('radar');
            if (test('Plane problem detected', hasPlane)) passed++;

            // Test 7: Problem detection - balloon
            total++;
            const text3 = 'balloon diameter';
            const hasBalloon = text3.toLowerCase().includes('balloon') || text3.toLowerCase().includes('diameter');
            if (test('Balloon problem detected', hasBalloon)) passed++;

            // Test 8: Problem detection - cube
            total++;
            const text4 = 'cube edges';
            const hasCube = text4.toLowerCase().includes('cube') || text4.toLowerCase().includes('edges');
            if (test('Cube problem detected', hasCube)) passed++;

            // Summary
            const summary = document.createElement('div');
            summary.className = `test-result ${passed === total ? 'pass' : 'fail'}`;
            summary.style.marginTop = '20px';
            summary.style.fontSize = '16px';
            summary.textContent = `Summary: ${passed}/${total} tests passed`;
            document.getElementById('results').appendChild(summary);

            if (passed === total) {
                const success = document.createElement('div');
                success.style.marginTop = '20px';
                success.style.color = '#065f46';
                success.textContent = 'ðŸŽ‰ All tests passed! The app is ready to use.';
                document.getElementById('results').appendChild(success);
            }
        }

        // Run tests automatically on load
        window.addEventListener('load', runTests);
    </script>
</body>
</html>
